<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>拓展学习 | 只非鱼</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
    <meta name="keywords" content="只非鱼,hjq,只非鱼博客" />
  
  <meta name="description" content="目录1、SeasLog日志系统 1.0.seasLog日志系统 1.1.安装方法 1.2.配置方法 1.3.常用方法 1.4.tp集成seaslog  2、PHPExcel拓展 2.1 PHPExcel简介 2.2 PHPExcel导出文件步骤介 2.3 PHPExcel输出到浏览器 2.4 PHPExcel样式设置介 2.5 PHPExcel导入excel  3、cURL 3.1.cURL概念">
<meta name="keywords" content="PHP">
<meta property="og:type" content="article">
<meta property="og:title" content="拓展学习">
<meta property="og:url" content="https://jqhee.github.io/2018/05/09/PHP/拓展学习/index.html">
<meta property="og:site_name" content="只非鱼">
<meta property="og:description" content="目录1、SeasLog日志系统 1.0.seasLog日志系统 1.1.安装方法 1.2.配置方法 1.3.常用方法 1.4.tp集成seaslog  2、PHPExcel拓展 2.1 PHPExcel简介 2.2 PHPExcel导出文件步骤介 2.3 PHPExcel输出到浏览器 2.4 PHPExcel样式设置介 2.5 PHPExcel导入excel  3、cURL 3.1.cURL概念">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-05-14T02:27:01.492Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="拓展学习">
<meta name="twitter:description" content="目录1、SeasLog日志系统 1.0.seasLog日志系统 1.1.安装方法 1.2.配置方法 1.3.常用方法 1.4.tp集成seaslog  2、PHPExcel拓展 2.1 PHPExcel简介 2.2 PHPExcel导出文件步骤介 2.3 PHPExcel输出到浏览器 2.4 PHPExcel样式设置介 2.5 PHPExcel导入excel  3、cURL 3.1.cURL概念">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  <script src="/js/pace.min.js"></script>
  

  
  

</head>

<body>
  <div id="container">
      <header id="header">
    <div id="banner"></div>
    <div id="header-outer">
        <div id="header-menu" class="header-menu-pos animated">
            <div class="header-menu-container">
                <a href="/" class="left">
                    <span class="site-title">只非鱼博客</span>
                </a>
                <nav id="header-menu-nav" class="right">
                    
                    <a  href="/">
                        <i class="fa fa-home"></i>
                        <span>首页</span>
                    </a>
                    
                    <a  href="/archives">
                        <i class="fa fa-archive"></i>
                        <span>档案</span>
                    </a>
                    
                </nav>
                <a class="mobile-header-menu-button">
                    <i class="fa fa-bars"></i>
                </a>
            </div>
        </div>
        <div id="header-row">
            <div id="logo">
                <a href="/">
                    <img src="/images/logo.png" alt="logo">
                </a>
            </div>
            <div class="header-info">
                <div id="header-title">
                    
                    <h2>
                        只非鱼博客
                    </h2>
                    
                </div>
                <div id="header-description">
                    
                    <h3>
                        一个专注 全栈 开发的技术博客
                    </h3>
                    
                </div>
            </div>
            <nav class="header-nav">
                <div class="social">
                    
                        <a title="首页"  href="//jqhee.github.io">
                            <i class="fa fa-home fa-2x"></i></a>
                    
                        <a title="Github" target="_blank" href="//github.com/JQHee">
                            <i class="fa fa-github fa-2x"></i></a>
                    
                        <a title="微博" target="_blank" href="//weibo.com/u/3173517645">
                            <i class="fa fa-weibo fa-2x"></i></a>
                    
                </div>
            </nav>
        </div>
    </div>
</header>
      <div class="outer">
        <section id="main" class="body-wrap"><article id="post-PHP/拓展学习" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 class="post-title" itemprop="name">
      拓展学习
    </h1>
    <div class="post-title-bar">
      <ul>
          
              <li>
                  <i class="fa fa-book"></i>
                  
                      <a href="/categories/PHP/">PHP</a>
                  
              </li>
          
        <li>
          <i class="fa fa-calendar"></i>  2018-05-09
        </li>
        <li>
          <i class="fa fa-eye"></i>
          <span id="busuanzi_value_page_pv"></span>
        </li>
      </ul>
    </div>
  

          
      </header>
    
    <div class="article-entry post-content" itemprop="articleBody">
      
            
            <h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><h3 id="1、SeasLog日志系统"><a href="#1、SeasLog日志系统" class="headerlink" title="1、SeasLog日志系统"></a>1、SeasLog日志系统</h3><ul>
<li><a href="#SeasLog_introduce">1.0.seasLog日志系统</a></li>
<li><a href="#SeasLog_installation_method">1.1.安装方法</a></li>
<li><a href="#SeasLog_config">1.2.配置方法</a></li>
<li><a href="#SeasLog_commonly_used_method">1.3.常用方法</a></li>
<li><a href="#tp_integration_SeasLog">1.4.tp集成seaslog</a></li>
</ul>
<h3 id="2、PHPExcel拓展"><a href="#2、PHPExcel拓展" class="headerlink" title="2、PHPExcel拓展"></a>2、PHPExcel拓展</h3><ul>
<li><a href="#PHPExcel_intrduce">2.1 PHPExcel简介</a></li>
<li><a href="#PHPExcel_steps">2.2 PHPExcel导出文件步骤介</a></li>
<li><a href="#PHPExcel_browser">2.3 PHPExcel输出到浏览器</a></li>
<li><a href="#PHPExcel_styles">2.4 PHPExcel样式设置介</a></li>
<li><a href="#PHPExcel_import">2.5 PHPExcel导入excel</a></li>
</ul>
<h3 id="3、cURL"><a href="#3、cURL" class="headerlink" title="3、cURL"></a>3、cURL</h3><ul>
<li><a href="#cURL_introduce">3.1.cURL概念</a></li>
<li><a href="#cURL_usage_scenarios">3.2.cURL使用场景</a></li>
<li><a href="#cURL_steps">3.3.cURL操作步骤解析</a></li>
<li><a href="#cURL_practical_application">3.4.cURL实战</a></li>
</ul>
<h3 id="4、消息队列"><a href="#4、消息队列" class="headerlink" title="4、消息队列"></a>4、消息队列</h3><ul>
<li><a href="#queue_system">4.1 解耦案例： 订单系统和配送系统</a></li>
<li><a href="#queue_miaosha">4.2 流量削峰案例： Redis的List(双向列表)类型实现秒杀</a></li>
<li><a href="#RabbitMQ">4.3 RabbitMQ 专业的队列消息系统</a></li>
</ul>
<h3 id="5、Linux-crontab定时任务"><a href="#5、Linux-crontab定时任务" class="headerlink" title="5、Linux crontab定时任务"></a>5、Linux crontab定时任务</h3><ul>
<li><a href="#crontab_intrduce">5.0 linux crontab定时任务的使用</a></li>
<li><a href="#crontab_intrduce1">5.1 crontab介绍</a></li>
<li><a href="#crontab_actual_combat">5.2 crontab实践</a></li>
</ul>
<p><br></p>
<h5 id="1-0-seasLog日志系统"><a href="#1-0-seasLog日志系统" class="headerlink" title=" 1.0.seasLog日志系统"></a><a id="SeasLog_introduce"></a> 1.0.seasLog日志系统</h5><p>网址： pecl.php.net</p>
<h5 id="1-1-安装方法"><a href="#1-1-安装方法" class="headerlink" title=" 1.1.安装方法"></a><a id="SeasLog_installation_method"></a> 1.1.安装方法</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">运行： </span><br><span class="line">phpize</span><br><span class="line">// php安装的路径</span><br><span class="line">./configure --with-php-config=/usr/local/php/bin/php-config</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line">将文件配置到php.ini配置文件当中</span><br><span class="line">添加： </span><br><span class="line">extension = &quot;seaslog.so&quot;</span><br></pre></td></tr></table></figure>
<h5 id="1-2-配置方法-可以参考github-seaslog"><a href="#1-2-配置方法-可以参考github-seaslog" class="headerlink" title=" 1.2.配置方法 可以参考github seaslog"></a><a id="SeasLog_config"></a> 1.2.配置方法 可以参考github seaslog</h5><p>将配置拷贝到 php.ini文件中</p>
<h5 id="1-3-常用方法"><a href="#1-3-常用方法" class="headerlink" title="  1.3.常用方法"></a><a id="SeasLog_commonly_used_method"> </a> 1.3.常用方法</h5><ul>
<li>1.3.1 配置方法</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setBasePath, getBasePath, setLogger, getLastLogger</span><br></pre></td></tr></table></figure>
<ul>
<li>1.3.2 写日志的方法</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">log, info notice, debug, warning, error</span><br></pre></td></tr></table></figure>
<ul>
<li>1.3.3 读日志的方法</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">analyzerCount, analyzerDetail(&apos;级别&apos;) 级别：info、notice...</span><br></pre></td></tr></table></figure>
<p>使用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SeasLog::setBasePath(&apos;/home/wwwroot/default/seaslog/log&apos;);</span><br><span class="line">echo SeasLog::getBasePath();</span><br><span class="line"></span><br><span class="line">// 分模块</span><br><span class="line">SeasLog::setLogger(&apos;Web&apos;);</span><br><span class="line">SeasLog::setLogger(&apos;Api&apos;);</span><br><span class="line">SeasLog::debug(&apos;It is debug info&apos;);</span><br><span class="line">SeasLog::info(&apos;It is info&apos;);</span><br></pre></td></tr></table></figure>
<h5 id="1-4-tp集成seaslog"><a href="#1-4-tp集成seaslog" class="headerlink" title=" 1.4.tp集成seaslog"></a><a id="tp_integration_SeasLog"></a> 1.4.tp集成seaslog</h5><p>tp中<code>Log.class.php</code>日志管理类</p>
<h5 id="2-1-PHPExcel简介"><a href="#2-1-PHPExcel简介" class="headerlink" title=" 2.1 PHPExcel简介"></a><a id="PHPExcel_intrduce"></a> 2.1 PHPExcel简介</h5><p>准备工具：<br>php版本 5.3以上<br>去官网下载PHPExcel,把classes导入工程中</p>
<h5 id="2-2-PHPExcel导出文件步骤"><a href="#2-2-PHPExcel导出文件步骤" class="headerlink" title="  2.2 PHPExcel导出文件步骤"></a><a id="PHPExcel_steps"> </a> 2.2 PHPExcel导出文件步骤</h5><ul>
<li>新建excel表格     - 初始化PHPExcel类</li>
<li>创建sheet(内置表) - createSheet() setActiveSheetIndex() getActiveSheet()</li>
<li>填充数据          - setCellValue()</li>
<li>保存文件          - PHPExcel_IOFactory::createWrite()  save()</li>
</ul>
<p>demo.php</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;? php</span><br><span class="line"></span><br><span class="line">// 引入</span><br><span class="line">$dir = dirname(__FILE__); // 找到当前脚本所在路径</span><br><span class="line">require $dir.&quot;/PHPExcel/PHPExcel.php&quot;;</span><br><span class="line">$objPHPExcel = new PHPExcel();</span><br><span class="line">$objSheet = $objPHPExcel -&gt; getActiveSheet();</span><br><span class="line">$objSheet -&gt; setTitle(&quot;demo&quot;);</span><br><span class="line">$objSheet -&gt; setCellValue(&quot;A1&quot;,&quot;姓名&quot;) -&gt; setCellValue(&quot;B1&quot;,&quot;分数&quot;);</span><br><span class="line">$objSheet -&gt; setCellValue(&quot;A2&quot;,&quot;张三&quot;) -&gt; setCellValue(&quot;B2&quot;,&quot;50&quot;) ;</span><br><span class="line">$objWriter = PHPExcel_IOFactory::createWrite($objPHPExcel,&quot;Excel2007&quot;);</span><br><span class="line">$objWriter  -&gt; save($dir.&quot;/demo.xlsx&quot;);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 数据填充的第二种方式 直接加载数据块填充数据（不建议使用）</span><br><span class="line">$array = array(</span><br><span class="line">  array(),</span><br><span class="line">  array(&quot;&quot;, &quot;姓名&quot;, &quot;分数&quot;),</span><br><span class="line">  array(&quot;&quot;, &quot;李四&quot;, &quot;60&quot;),</span><br><span class="line">  array(&quot;&quot;, &quot;王五&quot;, &quot;70&quot;),</span><br><span class="line">);</span><br><span class="line">$objSheet -&gt; fromArray($array);</span><br></pre></td></tr></table></figure>
<h5 id="2-3-从数据库-Mysql-读出数据，用PHPExcel导出文件步骤"><a href="#2-3-从数据库-Mysql-读出数据，用PHPExcel导出文件步骤" class="headerlink" title="  2.3 从数据库(Mysql)读出数据，用PHPExcel导出文件步骤"></a><a id="PHPExcel_browser"> </a> 2.3 从数据库(Mysql)读出数据，用PHPExcel导出文件步骤</h5><p>将Excel输出到浏览器，主要通过header头的方式</p>
<h5 id="2-4-PHPExcel样式设置"><a href="#2-4-PHPExcel样式设置" class="headerlink" title="  2.4 PHPExcel样式设置"></a><a id="PHPExcel_styles"> </a> 2.4 PHPExcel样式设置</h5><p>2.4.1 合并单元格 <code>$objSheet -&gt; mergeCells(&quot;A2:F2&quot;)</code><br>2.4.1 文字居中   <code>$objSheet -&gt; getDefaultStyle() -&gt; setVertical(参数)</code></p>
<h5 id="2-5-PHPExcel导入excel"><a href="#2-5-PHPExcel导入excel" class="headerlink" title="  2.5 PHPExcel导入excel"></a><a id="PHPExcel_import"> </a> 2.5 PHPExcel导入excel</h5><p>方式：选择加载</p>
<ul>
<li>全部读取</li>
<li>部分读取（只加载指定的sheet）<br>read.php</li>
</ul>
<h5 id="3-1-cURL概念"><a href="#3-1-cURL概念" class="headerlink" title=" 3.1.cURL概念"></a><a id="cURL_introduce"></a> 3.1.cURL概念</h5><p>使用URL语法传输数据的命令行工具。<br>文档： <a href="http://www.php.net/manual/zh/book.curl.php" target="_blank" rel="noopener">http://www.php.net/manual/zh/book.curl.php</a></p>
<h5 id="3-2-cURL使用场景"><a href="#3-2-cURL使用场景" class="headerlink" title=" 3.2.cURL使用场景"></a><a id="cURL_usage_scenarios"></a> 3.2.cURL使用场景</h5><ul>
<li>网页资源 （编写网页爬虫）</li>
<li>WebService数据接口资源 （获取接口数据）</li>
<li>FTP服务器里面的文件资源 （下载/上传FTP服务器里面的资源）</li>
<li>其他资源 （所有网络资源）</li>
</ul>
<p>windows 打印所有设置：<code>php -i</code><br>查找<code>cURL</code>,找到则支持</p>
<p>linux: <code>php -i | grep cURL</code></p>
<h5 id="3-3-cURL操作步骤解析"><a href="#3-3-cURL操作步骤解析" class="headerlink" title="  3.3.cURL操作步骤解析"></a><a id="cURL_steps"> </a> 3.3.cURL操作步骤解析</h5><ul>
<li>1.初始化cURL</li>
<li>2.向服务器发送请求</li>
<li>3.接收服务器数据</li>
<li><p>4.关闭cURL</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl_init(); // 1</span><br><span class="line">curl_exec(); // 2-3</span><br><span class="line">curl_close(); // 4</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="3-4-cURL实战"><a href="#3-4-cURL实战" class="headerlink" title=" 3.4.cURL实战"></a><a id="cURL_practical_application"></a> 3.4.cURL实战</h5><p>  执行：<code>php -f php文件名 &gt; baidu.html</code><br>  3.4.1 编写网页爬虫</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 抓取百度网页</span><br><span class="line">&lt;? php</span><br><span class="line">$curl = curl_init(&apos;http://www.baidu.com&apos;);</span><br><span class="line">curl_exec($curl);</span><br><span class="line">curl_close($curl);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 抓取百度网页，替换部分内容</span><br><span class="line">&lt;? php</span><br><span class="line">$curlobj = curl_init();</span><br><span class="line">curl_setopt($curlobj, CURLOPT_URL, &quot;http://www.baidu.com&quot;);</span><br><span class="line">// 执行之后不直接打印出来  true 只是下载</span><br><span class="line">curl_setopt($curlobj, CURLOPT_RETURNTRANSFER, true);</span><br><span class="line">$output = curl_exec($curlobj);</span><br><span class="line">curl_close($curlobj);</span><br><span class="line">echo str_replace(&quot;百度&quot;, &quot;测试&quot;, $output);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p>  3.4.2 获取Webservice上的天气信息</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;? php</span><br><span class="line">$data = &apos;theCityName=北京&apos;;</span><br><span class="line">$curlobj = curl_init();</span><br><span class="line">curl_setopt($curlobj, CURLOPT_URL, &quot;服务器地址&quot;);</span><br><span class="line">curl_setopt($curlobj, CURLOPT_HEADER, 0);</span><br><span class="line">curl_setopt($curlobj, CURLOPT_RETURNTRANSFER, 1);</span><br><span class="line">curl_setopt($curlobj, CURLOPT_POST, 1);</span><br><span class="line">curl_setopt($curlobj, CURLOPT_POSTFILELES, $data);</span><br><span class="line">curl_setopt($curlobj, CURLOPT_HTTPHEADER, array(&quot;application/x-www-form-urlencoded;charset=utf-8&quot;, &quot;Content-length:&quot;.strlen($data)));</span><br><span class="line">$rtn = curl_exec($curlobj);</span><br><span class="line">if (!curl_errno($curlobj)) &#123;</span><br><span class="line">  // $info = curl_getinfo($curlobj);</span><br><span class="line">  echo  $rtn;</span><br><span class="line">&#125; else &#123; // 有错误</span><br><span class="line">  echo curl_error($curlobj);</span><br><span class="line">&#125;</span><br><span class="line">curl_close($curlobj);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p>   3.4.3 登录慕课网，并下载个人空间页面</p>
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"> &lt;? php</span><br><span class="line"> $data = &apos;username=demo_peter@126.com&amp;password=123qwe&amp;remember=1&apos;;</span><br><span class="line"> $curlobj = curl_init();</span><br><span class="line"> curl_setopt($curlobj, CURLOPT_URL,&quot;http://www.imooc.com/user/login&quot;);</span><br><span class="line"> curl_setopt($curlobj, CURLOPT_RETURNTRANSFER, true);</span><br><span class="line"> </span><br><span class="line"> // Cookie相关设置，这部分设置要在所有会话开始前设置</span><br><span class="line"> data_default_timezone_set(&apos;RPC&apos;); // 设置时区</span><br><span class="line"> curl_setopt($curlobj, CURLOPT_COOKIESESSION, TRUE);</span><br><span class="line"> curl_setopt($curlobj, CURLOPT_COOKIEFILE, &apos;cookiefile);</span><br><span class="line"> curl_setopt($curlobj, CURLOPT_COOKIEJAR, &apos;cookiefile&apos;);</span><br><span class="line"> curl_setopt($curlobj, CURLOPT_COOKIE, session_name(). &apos;=&apos;. session_id() );</span><br><span class="line"> curl_setopt($curlobj, CURLOPT_HEADER, 0);</span><br><span class="line"> curl_setopt($curlobj, CURLOPT_FOLLOWLCATION, 1); // 让cURL支持页面链接跳转</span><br><span class="line"> </span><br><span class="line">curl_setopt($curlobj, CURLOPT_POST, 1);</span><br><span class="line">curl_setopt($curlobj, CURLOPT_POSTFILELES, $data);</span><br><span class="line">curl_setopt($curlobj, CURLOPT_HTTPHEADER, array(&quot;application/x-www-form-urlencoded;charset=utf-8&quot;, &quot;Content-length:&quot;.strlen($data)));</span><br><span class="line">curl_exec($curlobj);</span><br><span class="line">curl_setopt($curlobj, CURLOPT_URL, &quot;http://www.imooc.com/space/index&quot;);</span><br><span class="line">curl_setopt($curlobj, CURLOPT_POST, 0);</span><br><span class="line">curl_setopt($curlobj, CURLOPT_HTTPHEADER, array(&quot;Content-type: text/xml&quot;));</span><br><span class="line">$output = curl_exec($curlobj);</span><br><span class="line">curl_close($curlobj);</span><br><span class="line">echo  $output</span><br><span class="line"></span><br><span class="line"> ?&gt;</span><br></pre></td></tr></table></figure>
<p>   3.4.4 从FTP服务器中下载一个文件</p>
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> &lt;? php</span><br><span class="line"> $curlobj = curl_init();</span><br><span class="line"> curl_setopt($curlobj, CURLOPT_URL, &quot;ftp://192.168.1.100/downloaddemo.txt&quot;);</span><br><span class="line"> curl_setopt($curlobj, CURLOPT_HEADER, 0);</span><br><span class="line"> curl_setopt($curlobj, CURLOPT_RETURNTRANSFER, 1);</span><br><span class="line"> curl_setopt($curlobj, CURLOPT_TIMEOUT, 300);</span><br><span class="line"> curl_setopt($curlobj, CURLOPT_USERPWD, &quot;peter.zhou:123456&quot;); // FTP用户名和密码</span><br><span class="line"> $outfile = fopen(&apos;dest.txt&apos;, &apos;wb&apos;); // 保存到本地的文件名</span><br><span class="line"> curl_setopt($curlobj, CURLOPT_FILE, $outfile);</span><br><span class="line"> </span><br><span class="line"> $rtn = curl_exec($curlobj);</span><br><span class="line"> fclose($outfile);</span><br><span class="line">if (!curl_errno($curlobj)) &#123;</span><br><span class="line">  // $info = curl_getinfo($curlobj);</span><br><span class="line">  echo  $rtn;</span><br><span class="line">&#125; else &#123; // 有错误</span><br><span class="line">  echo curl_error($curlobj);</span><br><span class="line">&#125;</span><br><span class="line">curl_close($curlobj);</span><br><span class="line"> ?&gt;</span><br></pre></td></tr></table></figure>
<p>  3.4.5 从本地上传一个文件到FTP服务器中</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;? php</span><br><span class="line"> $curlobj = curl_init();</span><br><span class="line"> $localfile = &apos;ftp01.php&apos;;</span><br><span class="line"> $fp = fopen($localfile, &apos;r&apos;);</span><br><span class="line"> </span><br><span class="line"> curl_setopt($curlobj, CURLOPT_URL, &quot;ftp://192.168.1.100/downloaddemo.txt&quot;);</span><br><span class="line"> curl_setopt($curlobj, CURLOPT_HEADER, 0);</span><br><span class="line"> curl_setopt($curlobj, CURLOPT_RETURNTRANSFER, 1);</span><br><span class="line"> curl_setopt($curlobj, CURLOPT_TIMEOUT, 300);</span><br><span class="line"> curl_setopt($curlobj, CURLOPT_USERPWD, &quot;peter.zhou:123456&quot;); // FTP用户名和密码</span><br><span class="line"> </span><br><span class="line"> curl_setopt($curlobj, CURLOPT_UPLOAD, 1);</span><br><span class="line"> curl_setopt($curlobj, CURLOPT_INFILE, $fp);</span><br><span class="line"> curl_setopt($curlobj, CURLOPT_INFILESIZE, filesize($localfile));</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"> $rtn = curl_exec($curlobj);</span><br><span class="line"> fclose($fp);</span><br><span class="line">if (!curl_errno($curlobj)) &#123;</span><br><span class="line">  // $info = curl_getinfo($curlobj);</span><br><span class="line">  echo  $rtn;</span><br><span class="line">&#125; else &#123; // 有错误</span><br><span class="line">  echo curl_error($curlobj);</span><br><span class="line">&#125;</span><br><span class="line">curl_close($curlobj);</span><br><span class="line"> ?&gt;</span><br></pre></td></tr></table></figure>
<p>  3.4.6 下载HTTPS资源</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$curlobj = curl_init();</span><br><span class="line">curl_setopt($curlobj, CURLOPT_URL, &quot;ftp://192.168.1.100/downloaddemo.txt&quot;);</span><br><span class="line">curl_setopt($curlobj, CURLOPT_RETURNTRANSFER, 1);</span><br><span class="line">data_default_timezone_set(&apos;RPC&apos;); // 设置时区</span><br><span class="line">curl_setopt($curlobj, CURLOPT_SSL_VERIFYPEER, 0);</span><br><span class="line">$output = curl_exec($curlobj);</span><br><span class="line">curl_close($curlobj);</span><br><span class="line">echo $output;</span><br></pre></td></tr></table></figure>
<h4 id="4-1-解耦案例：-订单系统和配送系统"><a href="#4-1-解耦案例：-订单系统和配送系统" class="headerlink" title=" 4.1 解耦案例： 订单系统和配送系统"></a><a id="queue_system"></a> 4.1 解耦案例： 订单系统和配送系统</h4><ul>
<li>mysql订单队列</li>
</ul>
<p>// 订单系统</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 把订单信息，存储到队列表中</span><br><span class="line">$insert_data = array(</span><br><span class="line">  &apos;order_id&apos; =&gt; ,</span><br><span class="line">  &apos;mobie&apos; =&gt; ,</span><br><span class="line">  &apos;create_at&apos; =&gt; date(&apos;Y-m-d&apos;,timer()),</span><br><span class="line">  &apos;status&apos; =&gt; 0, // 订单状态</span><br><span class="line">);</span><br><span class="line">// 存储到队列表中</span><br></pre></td></tr></table></figure>
<p>配送系统</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 1: 先把要处理的记录更新为等待处理  加锁 防止其他系统操作</span><br><span class="line">$waiting = array(&apos;status&apos; =&gt; 0);</span><br><span class="line">$lock = array(&apos;status&apos; =&gt; 2); // 更新为等待处理</span><br><span class="line">数据库刷选出订单</span><br><span class="line">// 2： 处理刚锁定的订单</span><br><span class="line"></span><br><span class="line">// 3: 把这些处理过的更新为已完成</span><br><span class="line">$success =  array(</span><br><span class="line">  &apos;status&apos; =&gt; 1,</span><br><span class="line">  &apos;update_at&apos; =&gt; 时间,</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 定时脚本 good.sh</span><br><span class="line">#!/bin/bash</span><br><span class="line"></span><br><span class="line">date &quot;+%G-%m-%d %H:%M:S&quot;</span><br><span class="line"></span><br><span class="line">cd 目录</span><br><span class="line"></span><br><span class="line">php goods.php</span><br></pre></td></tr></table></figure>
<h4 id="4-2-流量削峰案例：-Redis的List-双向列表-类型实现秒杀"><a href="#4-2-流量削峰案例：-Redis的List-双向列表-类型实现秒杀" class="headerlink" title="4.2 流量削峰案例： Redis的List(双向列表)类型实现秒杀"></a><a id="queue_miaosha"></a>4.2 流量削峰案例： Redis的List(双向列表)类型实现秒杀</h4><p>代码级设计</p>
<ul>
<li>秒杀程序把请求写入Redis.(Uid,time_stamp)</li>
<li>检查Redis已存放数据的长度，超出上限直接丢弃</li>
<li>死循环处理存入Redis的数据库</li>
</ul>
<p>// 数据表 （time_stamp 微秒）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table `redis_queue`(</span><br><span class="line">	id int(11) unsigned not null auto_increment,</span><br><span class="line">    uid int(11)  not null default &apos;0&apos;,</span><br><span class="line">    time_stamp varchar(24) not null,</span><br><span class="line">    primary key(id)</span><br><span class="line">)engine=InnoDB default charset=utf8;</span><br></pre></td></tr></table></figure>
<p>接收用户请求： user.php</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// 1.加载redis组件</span><br><span class="line">$redis = new Redis();</span><br><span class="line">$redis  -&gt; connect(&apos;127.0.0.1&apos;,6379);</span><br><span class="line">$redis_name = &quot;miaosha&quot;;</span><br><span class="line"></span><br><span class="line">// 接受用户的uid</span><br><span class="line">$uid = $_GET(&apos;uid&apos;);</span><br><span class="line">// 获取redis里面已有的数量</span><br><span class="line">$num = 10;</span><br><span class="line">// 当人数少于10</span><br><span class="line">if ($redis -&gt; ILen($redis_name) &lt; 10) &#123;</span><br><span class="line">  $redis -&gt; rPush($redis_name, $uid.&apos;%&apos;.microtime());</span><br><span class="line">  echo $uid.&apos;秒杀成功！&apos;;</span><br><span class="line"></span><br><span class="line">&#125; else &#123; // 如果人数达到十个人，则返回秒杀已完成</span><br><span class="line">  echo $uid.&apos;秒杀已结束！&apos;;</span><br><span class="line">&#125;</span><br><span class="line">$redis -&gt; close();</span><br></pre></td></tr></table></figure>
<p>// 处理程序 savetodb.php</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">// 1.加载redis组件</span><br><span class="line">$redis = new Redis();</span><br><span class="line">$redis  -&gt; connect(&apos;127.0.0.1&apos;,6379);</span><br><span class="line">$redis_name = &quot;miaosha&quot;;</span><br><span class="line"></span><br><span class="line">// 死循环</span><br><span class="line">while(1) &#123;</span><br><span class="line">  // 从队列最左侧取出一个值</span><br><span class="line">  $user = $redis -&gt; lPush($redis_name);</span><br><span class="line">  // 然后判断这个值是否存在</span><br><span class="line">  if ($user || $user == &apos;nil&apos;) &#123;</span><br><span class="line">    sleep(2);</span><br><span class="line">    continue;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  // 切割时间，uid</span><br><span class="line">  $user_arr = explpde(&apos;%&apos;, $user);</span><br><span class="line">  $insert_data = array(</span><br><span class="line">    &apos;uid&apos; =&gt; $user_arr[0],</span><br><span class="line">    &apos;time_stamp&apos; =&gt; $user_arr[0],</span><br><span class="line">  );</span><br><span class="line">  // 保存到数据库中</span><br><span class="line">  $result = $db -&gt; insert(&apos;redis_queue&apos;, $insert_data);</span><br><span class="line">  // 插入失败，回滚</span><br><span class="line">  if (!$result) &#123;</span><br><span class="line">    $redis -&gt; rPush($redis_name, $user);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$redis -&gt; close();</span><br></pre></td></tr></table></figure>
<h4 id="4-3-RabbitMQ-专业的队列消息系统"><a href="#4-3-RabbitMQ-专业的队列消息系统" class="headerlink" title=" 4.3 RabbitMQ 专业的队列消息系统"></a><a id="RabbitMQ"> </a>4.3 RabbitMQ 专业的队列消息系统</h4><h5 id="5-0-linux-crontab定时任务的使用"><a href="#5-0-linux-crontab定时任务的使用" class="headerlink" title=" 5.0 linux crontab定时任务的使用"></a><a id="crontab_intrduce"></a> 5.0 linux crontab定时任务的使用</h5><p>  工作中遇到的困难</p>
<ul>
<li>每分钟需要执行一个程序检查系统的运行状态 （例如nodejs服务器检查）</li>
<li>每天凌晨需要对过去一天的业务数据进行统计</li>
<li>每个星期需要把日志文件备份</li>
<li>每个月需要把数据库进行备份</li>
</ul>
<h5 id="5-1-crontab介绍"><a href="#5-1-crontab介绍" class="headerlink" title=" 5.1 crontab介绍"></a><a id="crontab_intrduce1"></a> 5.1 crontab介绍</h5><p>crontab是什么：是一个用于设置周期性被执行任务的工具。</p>
<h5 id="5-2-crontab实践"><a href="#5-2-crontab实践" class="headerlink" title="  5.2 crontab实践"></a><a id="crontab_actual_combat"> </a> 5.2 crontab实践</h5><p>5.1.0 相关工具</p>
<ul>
<li>Putty: 一个免费的易用的SSH连接工具</li>
<li><a href="http://www.putty.org/" target="_blank" rel="noopener">http://www.putty.org/</a></li>
</ul>
<p>5.1.1 安装并检查Crontab服务</p>
<ul>
<li>检查crontab工具是否安装： <code>crontab -l</code></li>
<li>检查crontab服务是否启动： <code>service crontab status</code></li>
<li>安装cron <code>yum install vixie-cron</code>  <code>yum install crontabs</code></li>
</ul>
<p>5.1.2 简单应用</p>
<ul>
<li>每分钟把当前时间打印到一个日志文件中 <code>crontab -e</code> (打开文件写数据)</li>
<li><p><code>tail -f /tmp/log.txt</code> 查看文件最后几行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*/1 * * * * date &gt;&gt; /tmp/log.txt</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>5.1.3 crontab基本组成</p>
<ul>
<li>配置文件</li>
<li>CTOND</li>
<li>crontab工具</li>
</ul>
<p>5.1.4 crontab配置文件的格式</p>
<ul>
<li><code>* * * * * COMMAND</code></li>
<li><code>* 分钟：</code></li>
<li><code>* * 小时</code></li>
<li><code>* * * 日期 1~31</code></li>
<li><code>* * * * 月份 1 ~ 12</code></li>
<li><code>* * * * * 星期 0 ~ 7</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># 1. 每晚21：30 重启Apache</span><br><span class="line">30 21 * * * service httpd restart</span><br><span class="line"></span><br><span class="line"># 2.每月1、10、22日的4: 45重启Apache</span><br><span class="line">45 4 1,10,22 * * service httpd restart</span><br><span class="line"></span><br><span class="line"># 3.每月1-10日的4：45重启apache</span><br><span class="line">45 4 1-10 * * service httpd restart</span><br><span class="line"></span><br><span class="line"># 4.每隔2分钟重启apache</span><br><span class="line">*/2 * * * service httpd restart # 偶数分钟</span><br><span class="line">1-59/2 * * * service httpd restart # 奇数分钟</span><br><span class="line"></span><br><span class="line"># 5.晚上11点-7点之间，每隔1小时重启apache</span><br><span class="line">0 23-7/1 * * * service httpd restart</span><br><span class="line"></span><br><span class="line"># 6.每天18点-23点之间，每隔30分钟重启apache</span><br><span class="line">0,30 18-23 * * * service httpd restart</span><br><span class="line">0-59/30 18-23 * * * service httpd restart</span><br><span class="line"></span><br><span class="line"># 7.每分钟执行两次</span><br><span class="line">*/1 * * * * date &gt;&gt; /temp/log.txt</span><br><span class="line">*/1 * * * * sleep 30s; date &gt;&gt; /temp/log.txt</span><br></pre></td></tr></table></figure>

            <div class="post-copyright">
    <div class="content">
        <p>最后更新： 2018年05月14日 10:27</p>
        <p>原始链接： <a class="post-url" href="/2018/05/09/PHP/拓展学习/" title="拓展学习">https://jqhee.github.io/2018/05/09/PHP/拓展学习/</a></p>
        <footer>
            <a href="https://jqhee.github.io">
                <img src="/images/logo.png" alt="hjq">
                hjq
            </a>
        </footer>
    </div>
</div>

      
        
            

        
    </div>
    <footer class="article-footer">
        
        <ul class="article-footer-menu">
            
            
  <li class="article-footer-tags">
    <i class="fa fa-tags"></i>
      
    <a href="/tags/PHP/" class="color4">PHP</a>
      
  </li>

        </ul>
        
    </footer>
  </div>
</article>


    <aside class="post-toc-pos post-toc-top" id="post-toc">
        <nav class="post-toc-wrap">
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#目录"><span class="post-toc-text">目录</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1、SeasLog日志系统"><span class="post-toc-text">1、SeasLog日志系统</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2、PHPExcel拓展"><span class="post-toc-text">2、PHPExcel拓展</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3、cURL"><span class="post-toc-text">3、cURL</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4、消息队列"><span class="post-toc-text">4、消息队列</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5、Linux-crontab定时任务"><span class="post-toc-text">5、Linux crontab定时任务</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#1-0-seasLog日志系统"><span class="post-toc-text"> 1.0.seasLog日志系统</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#1-1-安装方法"><span class="post-toc-text"> 1.1.安装方法</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#1-2-配置方法-可以参考github-seaslog"><span class="post-toc-text"> 1.2.配置方法 可以参考github seaslog</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#1-3-常用方法"><span class="post-toc-text">  1.3.常用方法</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#1-4-tp集成seaslog"><span class="post-toc-text"> 1.4.tp集成seaslog</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#2-1-PHPExcel简介"><span class="post-toc-text"> 2.1 PHPExcel简介</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#2-2-PHPExcel导出文件步骤"><span class="post-toc-text">  2.2 PHPExcel导出文件步骤</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#2-3-从数据库-Mysql-读出数据，用PHPExcel导出文件步骤"><span class="post-toc-text">  2.3 从数据库(Mysql)读出数据，用PHPExcel导出文件步骤</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#2-4-PHPExcel样式设置"><span class="post-toc-text">  2.4 PHPExcel样式设置</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#2-5-PHPExcel导入excel"><span class="post-toc-text">  2.5 PHPExcel导入excel</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#3-1-cURL概念"><span class="post-toc-text"> 3.1.cURL概念</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#3-2-cURL使用场景"><span class="post-toc-text"> 3.2.cURL使用场景</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#3-3-cURL操作步骤解析"><span class="post-toc-text">  3.3.cURL操作步骤解析</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#3-4-cURL实战"><span class="post-toc-text"> 3.4.cURL实战</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-1-解耦案例：-订单系统和配送系统"><span class="post-toc-text"> 4.1 解耦案例： 订单系统和配送系统</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-2-流量削峰案例：-Redis的List-双向列表-类型实现秒杀"><span class="post-toc-text">4.2 流量削峰案例： Redis的List(双向列表)类型实现秒杀</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-3-RabbitMQ-专业的队列消息系统"><span class="post-toc-text"> 4.3 RabbitMQ 专业的队列消息系统</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#5-0-linux-crontab定时任务的使用"><span class="post-toc-text"> 5.0 linux crontab定时任务的使用</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#5-1-crontab介绍"><span class="post-toc-text"> 5.1 crontab介绍</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#5-2-crontab实践"><span class="post-toc-text">  5.2 crontab实践</span></a></li></ol></li></ol></li></ol></li></ol>
        </nav>
    </aside>
    

<nav id="article-nav">
  
    <a href="/2018/05/09/PHP/Mac 搭建PHP环境/" id="article-nav-newer" class="article-nav-link-wrap">

      <span class="article-nav-title">
        <i class="fa fa-hand-o-left" aria-hidden="true"></i>
        
          Mac 搭建php开发环境
        
      </span>
    </a>
  
  
</nav>



    
</section>
        
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info" class="inner">
      
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


      <p>
        Powered by  <a href="http://hexo.io/" target="_blank">Hexo</a>
        Theme <a href="//github.com/wongminho/hexo-theme-miho" target="_blank">MiHo</a>
      &copy; 2018 hjq<br>
      </p>
    </div>
  </div>
</footer>
    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script>
  var mihoConfig = {
      root: "https://jqhee.github.io",
      animate: false,
      isHome: false,
      share: false,
      reward: 0
  }
</script>
<div class="sidebar">
    <div id="sidebar-search" title="Search">
        <i class="fa fa-search"></i>
    </div>
    <div id="sidebar-category" title="Categories">
        <i class="fa fa-book"></i>
    </div>
    <div id="sidebar-tag" title="Tags">
        <i class="fa fa-tags"></i>
    </div>
    <div id="sidebar-top">
        <span class="sidebar-top-icon"><i class="fa fa-angle-up"></i></span>
    </div>
</div>
<div class="sidebar-menu-box" id="sidebar-menu-box">
    <div class="sidebar-menu-box-container">
        <div id="sidebar-menu-box-categories">
            <a class="category-link" href="/categories/PHP/">PHP</a><a class="category-link" href="/categories/Swift/">Swift</a><a class="category-link" href="/categories/objective-C/">objective-C</a>
        </div>
        <div id="sidebar-menu-box-tags">
            <a href="/tags/Mysql/" style="font-size: 10px;">Mysql</a> <a href="/tags/PHP/" style="font-size: 20px;">PHP</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/Swift/" style="font-size: 10px;">Swift</a> <a href="/tags/api接口开发/" style="font-size: 10px;">api接口开发</a> <a href="/tags/objective-C/" style="font-size: 10px;">objective-C</a>
        </div>
    </div>
    <a href="javascript:;" class="sidebar-menu-box-close">&times;</a>
</div>
<div class="mobile-header-menu-nav" id="mobile-header-menu-nav">
    <div class="mobile-header-menu-container">
        <span class="title">Menus</span>
        <ul class="mobile-header-menu-navbar">
            
            <li>
                <a  href="/">
                    <i class="fa fa-home"></i><span>首页</span>
                </a>
            </li>
            
            <li>
                <a  href="/archives">
                    <i class="fa fa-archive"></i><span>档案</span>
                </a>
            </li>
            
        </ul>
    </div>
    <div class="mobile-header-tag-container">
        <span class="title">Tags</span>
        <div id="mobile-header-container-tags">
            <a href="/tags/Mysql/" style="font-size: 10px;">Mysql</a> <a href="/tags/PHP/" style="font-size: 20px;">PHP</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/Swift/" style="font-size: 10px;">Swift</a> <a href="/tags/api接口开发/" style="font-size: 10px;">api接口开发</a> <a href="/tags/objective-C/" style="font-size: 10px;">objective-C</a>
        </div>
    </div>
</div>
<div class="search-wrap">
    <span class="search-close">&times;</span>
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
            <i class="icon icon-lg icon-chevron-left"></i>
        </a>
        <input class="search-field" placeholder="Search..." id="keywords">
        <a id="search-submit" href="javascript:;">
            <i class="fa fa-search"></i>
        </a>
    <div class="search-container" id="search-container">
        <ul class="search-result" id="search-result">
        </ul>
    </div>
</div>

<div id="search-tpl">
    <li class="search-result-item">
        <a href="{url}" class="search-item-li">
            <span class="search-item-li-title" title="{title}">{title}</span>
        </a>
    </li>
</div>
<script src="/js/search.js"></script>
<script src="/js/main.js"></script>


  <script src="//cdn.bootcss.com/particles.js/2.0.0/particles.min.js"></script>
  <div id="particles"></div>
  <script src="/js/particles.js"></script>








  <script src="/js/pop-img.js"></script>
  <script>
     $(".article-entry p img").popImg();
  </script>

  </div>
</body>
</html>